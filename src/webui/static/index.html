<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yggdrasil Web Interface</title>
    <link rel="stylesheet" href="static/style.css">
    <script src="static/api.js"></script>
    <script src="static/app.js"></script>
    <script src="static/lang/ru.js"></script>
    <script sr—Å="static/lang/en.js"></script>
</head>

<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div>
                    <h1 data-key="title">üå≥ Yggdrasil Web Interface</h1>
                    <p data-key="subtitle">Network mesh management dashboard</p>
                </div>
                <div class="header-actions">
                    <div class="controls-group">
                        <button onclick="toggleTheme()" class="theme-btn" id="theme-btn">
                            <span class="theme-icon">üåô</span>
                        </button>
                        <button onclick="switchLanguage('ru')" class="lang-btn" id="lang-ru">RU</button>
                        <button onclick="switchLanguage('en')" class="lang-btn" id="lang-en">EN</button>
                    </div>
                </div>
            </div>
        </header>

        <div class="layout">
            <aside class="sidebar">
                <nav class="nav-menu">
                    <div class="nav-item active" onclick="showSection('status')">
                        <span class="nav-icon">üìä</span>
                        <span class="nav-text" data-key="nav_status">–°–æ—Å—Ç–æ—è–Ω–∏–µ</span>
                    </div>
                    <div class="nav-item" onclick="showSection('peers')">
                        <span class="nav-icon">üåê</span>
                        <span class="nav-text" data-key="nav_peers">–ü–∏—Ä—ã</span>
                    </div>
                    <div class="nav-item" onclick="showSection('config')">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span class="nav-text" data-key="nav_config">–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</span>
                    </div>
                </nav>

                <div class="sidebar-footer">
                    <button onclick="logout()" class="logout-btn" data-key="logout">Logout</button>
                </div>
            </aside>

            <main class="main-content">
                <div id="status-section" class="content-section active">
                    <div class="status-card">
                        <h2 data-key="status_title">–°–æ—Å—Ç–æ—è–Ω–∏–µ —É–∑–ª–∞</h2>
                        <p data-key="status_description">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –≤–∞—à–µ–≥–æ —É–∑–ª–∞ Yggdrasil</p>
                    </div>

                    <div class="info-grid">
                        <div class="info-card">
                            <h3 data-key="node_info">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É–∑–ª–µ</h3>
                            <p><span data-key="public_key">–ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á</span>: <span id="node-key"
                                    data-key="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</span> <button onclick="copyNodeKey()"
                                    style="margin-left: 8px; font-size: 12px;">üìã</button></p>
                            <p><span data-key="version">–í–µ—Ä—Å–∏—è</span>: <span id="node-version"
                                    data-key="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
                            <p><span data-key="routing_entries">–ó–∞–ø–∏—Å–µ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏</span>: <span id="routing-entries"
                                    data-key="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
                            <span id="node-key-full" data-value="" style="display: none;"></span>
                        </div>

                        <div class="info-card">
                            <h3 data-key="network_info">–°–µ—Ç–µ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                            <p><span data-key="address">–ê–¥—Ä–µ—Å</span>: <span id="node-address"
                                    data-key="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
                            <p><span data-key="subnet">–ü–æ–¥—Å–µ—Ç—å</span>: <span id="node-subnet"
                                    data-key="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
                        </div>

                        <div class="info-card">
                            <h3 data-key="statistics">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∏—Ä–æ–≤</h3>
                            <p><span data-key="total_peers">–í—Å–µ–≥–æ –ø–∏—Ä–æ–≤</span>: <span id="peers-count"
                                    data-key="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
                            <p><span data-key="online_peers">–û–Ω–ª–∞–π–Ω –ø–∏—Ä–æ–≤</span>: <span id="peers-online"
                                    data-key="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
                        </div>
                    </div>
                </div>

                <div id="peers-section" class="content-section">
                    <div class="status-card">
                        <h2 data-key="peers_title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∏—Ä–∞–º–∏</h2>
                        <p data-key="peers_description">–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ —Å –ø–∏—Ä–∞–º–∏</p>
                    </div>

                    <div class="info-grid">
                        <div class="info-card">
                            <h3 data-key="add_peer">–î–æ–±–∞–≤–∏—Ç—å –ø–∏—Ä</h3>
                            <p data-key="add_peer_description">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –Ω–æ–≤–æ–º—É —É–∑–ª—É</p>
                            <button onclick="addPeer()" class="action-btn" data-key="add_peer_btn">–î–æ–±–∞–≤–∏—Ç—å –ø–∏—Ä</button>
                        </div>
                    </div>

                    <div class="peers-container">
                        <h3 data-key="connected_peers">–ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ –ø–∏—Ä—ã</h3>
                        <div id="peers-list" class="peers-list">
                            <div class="loading" data-key="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        </div>
                    </div>
                </div>

                <div id="config-section" class="content-section">
                    <div class="status-card">
                        <h2 data-key="config_title">–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</h2>
                        <p data-key="config_description">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–∑–ª–∞ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–µ—Ç–∏</p>
                    </div>

                    <div class="info-grid">
                        <div class="info-card">
                            <h3 data-key="basic_settings">–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                            <p data-key="basic_settings_description">–ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É–∑–ª–∞</p>
                            <small data-key="coming_soon">–§—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ...</small>
                        </div>

                        <div class="info-card">
                            <h3 data-key="network_settings">–°–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                            <p data-key="network_settings_description">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–µ—Ç–µ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è</p>
                            <small data-key="coming_soon">–§—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ...</small>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <footer>
            <p data-key="footer_text">Yggdrasil Network ‚Ä¢ Minimal WebUI v1.0</p>
        </footer>
    </div>

    <!-- Notifications container -->
    <div class="notifications-container" id="notifications-container"></div>

    <script>
        let currentLanguage = localStorage.getItem('yggdrasil-language') || 'ru';
        let currentTheme = localStorage.getItem('yggdrasil-theme') || 'light';

        function updateTexts() {
            const elements = document.querySelectorAll('[data-key]');
            elements.forEach(element => {
                const key = element.getAttribute('data-key');
                if (window.translations && window.translations[currentLanguage] && window.translations[currentLanguage][key]) {
                    element.textContent = window.translations[currentLanguage][key];
                }
            });
        }

        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            applyTheme();
            localStorage.setItem('yggdrasil-theme', currentTheme);
        }

        function applyTheme() {
            document.documentElement.setAttribute('data-theme', currentTheme);
            const themeBtn = document.getElementById('theme-btn');
            if (themeBtn) {
                const icon = themeBtn.querySelector('.theme-icon');
                if (icon) {
                    icon.textContent = currentTheme === 'light' ? 'üåô' : '‚òÄÔ∏è';
                }
            }
        }

        function switchLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('yggdrasil-language', lang);

            // Update button states
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('lang-' + lang).classList.add('active');

            // Update all texts
            updateTexts();
        }

        function showSection(sectionName) {
            // Hide all sections
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => section.classList.remove('active'));

            // Remove active class from all nav items
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));

            // Show selected section
            const targetSection = document.getElementById(sectionName + '-section');
            if (targetSection) {
                targetSection.classList.add('active');
            }

            // Add active class to clicked nav item
            event.target.closest('.nav-item').classList.add('active');
        }

        // Notification system (shared with app.js)
        let notificationId = 0;

        function showNotification(message, type = 'info', title = null, duration = 5000) {
            const container = document.getElementById('notifications-container');
            const id = ++notificationId;

            const icons = {
                success: '‚úÖ',
                error: '‚ùå',
                warning: '‚ö†Ô∏è',
                info: '‚ÑπÔ∏è'
            };

            const titles = {
                success: window.translations[currentLanguage]['notification_success'] || 'Success',
                error: window.translations[currentLanguage]['notification_error'] || 'Error',
                warning: window.translations[currentLanguage]['notification_warning'] || 'Warning',
                info: window.translations[currentLanguage]['notification_info'] || 'Information'
            };

            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.id = `notification-${id}`;

            notification.innerHTML = `
                <div class="notification-icon">${icons[type] || icons.info}</div>
                <div class="notification-content">
                    <div class="notification-title">${title || titles[type]}</div>
                    <div class="notification-message">${message}</div>
                </div>
                <button class="notification-close" onclick="removeNotification(${id})">&times;</button>
            `;

            container.appendChild(notification);

            // Auto remove after duration
            if (duration > 0) {
                setTimeout(() => {
                    removeNotification(id);
                }, duration);
            }

            return id;
        }

        function removeNotification(id) {
            const notification = document.getElementById(`notification-${id}`);
            if (notification) {
                notification.classList.add('removing');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }
        }

        function showSuccess(message, title = null) {
            return showNotification(message, 'success', title);
        }

        function showError(message, title = null) {
            return showNotification(message, 'error', title);
        }

        function showWarning(message, title = null) {
            return showNotification(message, 'warning', title);
        }

        function showInfo(message, title = null) {
            return showNotification(message, 'info', title);
        }

        // Initialize language and theme on page load
        document.addEventListener('DOMContentLoaded', function () {
            // Set active language button
            document.getElementById('lang-' + currentLanguage).classList.add('active');
            // Update all texts
            updateTexts();
            // Apply saved theme
            applyTheme();
        });
    </script>
</body>

</html>